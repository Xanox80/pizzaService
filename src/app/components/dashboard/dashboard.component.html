<div class="dashboard-container">
  <button
    class="burger-btn"
    [class.burger-btn--up]="menuVisible"
    (click)="toggleMenu()"
  >
    <span></span>
    <span></span>
    <span></span>
  </button>

  <div class="dashboard-menu" [class.open]="menuVisible">
    <p-panelMenu
      [model]="items"
      [style]="{ width: '260px' }"
      [multiple]="true"
    ></p-panelMenu>
  </div>

  <div class="dashboard-content">
    <h2>Dashboard</h2>

    <div class="goal-progress-card">
      <h3>–î–æ —Ü—ñ–ª—ñ {{ goalOrders }} –∑–∞–º–æ–≤–ª–µ–Ω—å –∑–∞–ª–∏—à–∏–ª–æ—Å—å:</h3>
      <div class="progress-bar-outer">
        <div class="progress-bar-inner" [style.width.%]="ordersProgress"></div>
      </div>
      <div class="progress-info">
        {{ ordersMonth }} / {{ goalOrders }} –∑–∞–º–æ–≤–ª–µ–Ω—å
        <span *ngIf="ordersLeft > 0"> (—â–µ {{ ordersLeft }}!)</span>
        <span *ngIf="ordersLeft === 0"> üéâ –ú–µ—Ç–∞ –¥–æ—Å—è–≥–Ω—É—Ç–∞!</span>
      </div>
    </div>

    <ng-container [ngSwitch]="selectedSection">
      <ng-container *ngSwitchCase="'orders'">
        <div class="stat-card">
          <i class="pi pi-calendar stat-icon"></i>
          <div>
            <h3>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–º–æ–≤–ª–µ–Ω—å</h3>
            <ul>
              <li>
                –°—å–æ–≥–æ–¥–Ω—ñ: <b>{{ ordersToday }}</b>
              </li>
              <li>
                –ó–∞ —Ç–∏–∂–¥–µ–Ω—å: <b>{{ ordersWeek }}</b>
              </li>
              <li>
                –ó–∞ –º—ñ—Å—è—Ü—å: <b>{{ ordersMonth }}</b>
              </li>
            </ul>
          </div>
        </div>
      </ng-container>
      <ng-container *ngSwitchCase="'ingredients'">
        <div class="warehouse-section">
          <h3>–°–∫–ª–∞–¥ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤</h3>
          <div class="warehouse-list">
            <div class="warehouse-item" *ngFor="let product of products">
              <img
                [src]="product.image"
                [alt]="product.name"
                class="warehouse-img"
              />
              <div class="warehouse-info">
                <h4>{{ product.name }}</h4>
                <p>{{ product.description }}</p>
                <div class="warehouse-meta">
                  <span class="warehouse-price">{{ product.price }} –≥—Ä–Ω</span>
                  <span class="warehouse-category">{{ product.category }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
      <ng-container *ngSwitchCase="'popular'">
        <h3>–ù–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à–∞ –ø—ñ—Ü–∞</h3>
        <ng-container *ngIf="mostPopularPizza; else noPizza">
          <div class="popular-pizza-card">
            <b>{{ mostPopularPizza.name }}</b> ‚Äî
            {{ mostPopularPizza.orders }} –∑–∞–º–æ–≤–ª–µ–Ω—å
          </div>
        </ng-container>
        <ng-template #noPizza>
          <p>–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –ø—Ä–æ –ø—ñ—Ü–∏.</p>
        </ng-template>
      </ng-container>
      <ng-container *ngSwitchCase="'average'">
        <div class="stat-card">
          <i class="pi pi-wallet stat-icon"></i>
          <div>
            <h3>–°–µ—Ä–µ–¥–Ω—ñ–π —á–µ–∫</h3>
            <p class="average-check">
              <b>{{ averageCheck }} ‚Ç¥</b>
            </p>
          </div>
        </div>
      </ng-container>
      <ng-container *ngSwitchCase="'logFeedbacks'">
        <h3>–õ–æ–≥–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –≤—ñ–¥–≥—É–∫—ñ–≤</h3>
        <div
          *ngFor="let log of getFeedbackLogs(); let i = index"
          class="log-item"
        >
          <p class="log-text">"{{ log.text }}"</p>
          <p class="log-date">–ó–∞–ª–∏—à–µ–Ω–æ: {{ log.date }}</p>
          <p class="log-removed">–í–∏–¥–∞–ª–µ–Ω–æ: {{ log.removedAt }}</p>
          <p class="log-user">–í–∏–¥–∞–ª–∏–≤: {{ log.removedBy }}</p>
          <button class="closeLogs" (click)="deleteLog(i)">–í–∏–¥–∞–ª–∏—Ç–∏</button>
        </div>
      </ng-container>

      <ng-container *ngSwitchCase="'LogPizza'">
        <h3>–õ–æ–≥–∏ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—ñ—Ü</h3>
        <div *ngFor="let log of getPizzaLogs(); let i = index" class="log-item">
          <p class="log-text">{{ log.user }} {{ log.action }}</p>
          <p class="log-user">–ù–∞–∑–≤–∞ –ø—ñ—Ü—Ü–∏: ({{ log.name }})</p>
          <p class="log-date">–ß–∞—Å: {{ log.time }}</p>
          <button class="closeLogs" (click)="deletePizzaLog(i)">
            –í–∏–¥–∞–ª–∏—Ç–∏
          </button>
        </div>
      </ng-container>

      <ng-container>
        <div
          class="admins"
          *ngIf="selectedSection === 'admins' && SelectedAdmins"
        >
          <i class="pi pi-users workers-icon"></i>
          <div>
            <h3>{{ SelectedAdmins.name }}</h3>
            <p>
              –°–∫—ñ–ª—å–∫–∏ —Ä–æ–∫—ñ–≤: <b>{{ SelectedAdmins.age }}</b>
            </p>
            <p>
              –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É: <b>{{ SelectedAdmins.phone }}</b>
            </p>
          </div>
        </div>
      </ng-container>

      <ng-container *ngSwitchCase="'bestCustomer'">
        <div class="stat-card">
          <i class="pi pi-user stat-icon"></i>
          <div>
            <h3>–ù–∞–π–∫—Ä–∞—â–∏–π –ø–æ–∫—É–ø–µ—Ü—å</h3>
            <p class="best-customer">
              <b>{{ bestCustomer }}</b>
            </p>
          </div>
        </div>
      </ng-container>
      <ng-container *ngSwitchCase="'bestEmployee'">
        <div class="stat-card">
          <i class="pi pi-users stat-icon"></i>
          <div>
            <h3>–ù–∞–π–∫—Ä–∞—â–∏–π –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫</h3>
            <p class="best-employee">
              <b>{{ bestEmployee }}</b>
            </p>
          </div>
        </div>
      </ng-container>
      <ng-container *ngSwitchCase="'logProductRemove'">
        <h3>–õ–æ–≥–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω—å</h3>
        <div *ngIf="getOrderRemoveLogs().length === 0">
          <p>–õ–æ–≥—ñ–≤ –Ω–µ–º–∞—î.</p>
        </div>
        <div
          *ngFor="let log of getOrderRemoveLogs(); let i = index"
          class="log-item"
        >
          <p class="log-text">
            "{{ log.name }}" (x{{ log.quantity }}) ‚Äì {{ log.price }} –≥—Ä–Ω
          </p>
          <p class="log-date">–î–∞—Ç–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è: –Ω–µ–≤—ñ–¥–æ–º–æ</p>
          <p class="log-removed">
            –í–∏–¥–∞–ª–µ–Ω–æ: {{ log.removedAt | date : "medium" }}
          </p>
          <p class="log-user">–í–∏–¥–∞–ª–∏–≤: {{ log.removedBy }}</p>
          <button class="closeLogs" (click)="deleteOrderLog(i)">
            –í–∏–¥–∞–ª–∏—Ç–∏
          </button>
        </div>
      </ng-container>

      <ng-container *ngSwitchCase="'feedback'">
        <div class="feedbacks-section">
          <h3>–í—ñ–¥–≥—É–∫–∏ —Ç–∞ –ø–æ—Ä–∞–¥–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</h3>
          <div class="text-feedback" *ngIf="feedbacks.length === 0">
            –í—ñ–¥–≥—É–∫—ñ–≤ —â–µ –Ω–µ–º–∞—î.
          </div>
          <ul>
            <li *ngFor="let fb of feedbacks; let i = index">
              <span>{{ fb.text }}</span>

              <span class="feedback-date">{{ fb.date | date : "short" }}</span>
              <button class="btn-feedback" (click)="removeFeedback(i)">
                –í–∏–¥–∞–ª–∏—Ç–∏
              </button>
            </li>
          </ul>
        </div>
      </ng-container>
      <ng-container>
        <div
          class="stat-card"
          *ngIf="selectedSection === 'workers' && selectedWorker"
        >
          <i class="pi pi-users workers-icon"></i>
          <div>
            <h3>{{ selectedWorker.name }}</h3>
            <p>
              –ü–æ—Å–∞–¥–∞: <b>{{ selectedWorker.position }}</b>
            </p>
            <p>
              –†–µ–π—Ç–∏–Ω–≥:
              <span class="rating" *ngIf="selectedWorker.rating !== undefined">
                <ng-container
                  *ngFor="let star of getStars(selectedWorker.rating)"
                >
                  <i
                    class="pi pi-star star"
                    [ngClass]="{ filled: star === 'filled' }"
                  ></i>
                </ng-container>
              </span>
            </p>
          </div>
        </div>
      </ng-container>

      <ng-container *ngSwitchCase="'megaDiscount'">
        <div class="stat-card">
          <i class="pi pi-tag stat-icon"></i>
          <div>
            <h3>–ê–∫—Ü—ñ—è –Ω–∞ –ø—ñ—Ü–∏</h3>
            <p class="mega-discount">
              <b>{{ megaDiscount }}</b>
            </p>
          </div>
        </div>
      </ng-container>
      <ng-container *ngSwitchCase="'pizzaOrders'">
        <div class="cart-container">
          <div>
            <div *ngIf="cartItems.length === 0" class="empty-cart">
              –ù–∞ –¥–∞–Ω–∏–π –º–æ–º–µ–Ω—Ç –∑–∞–∫–∞–∑–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ
            </div>
          </div>

          <div *ngIf="cartItems.length > 0" class="cart-items">
            <div *ngFor="let item of cartItems" class="cart-item">
              <img [src]="item.image" [alt]="item.name" class="item-image" />
              <div class="item-details">
                <h3>{{ item.name }}</h3>
                <p class="price">{{ item.price }} –≥—Ä–Ω</p>
              </div>
              <div class="quantity-controls">
                <span>{{ item.quantity }}</span>
              </div>
              <button class="remove-btn" (click)="remove(item.id)">
                –í–∏–¥–∞–ª–∏—Ç–∏
              </button>
            </div>
          </div>
        </div>
      </ng-container>

      <ng-container *ngSwitchCase="'megaDiscountEnd'">
        <div class="stat-card">
          <i class="pi pi-clock stat-icon"></i>
          <div>
            <h3>–ê–∫—Ü—ñ—è –Ω–∞ —Ç—Ä–µ—Ç—é –ø—ñ—Ü—É</h3>
            <p class="mega-discount-end">
              {{ megaDiscountEnd }}
            </p>
          </div>
        </div>
      </ng-container>
      <ng-container *ngSwitchCase="'LogProductRemove'">
        <h3>–õ–æ–≥–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω—å</h3>
        <div *ngFor="let log of getOrderRemoveLogs()" class="log-item">
          <p class="log-text">ID: {{ log.id }} | {{ log.name }}</p>
          <p class="log-date">
            –¶—ñ–Ω–∞: {{ log.price }} –≥—Ä–Ω, –ö—ñ–ª—å–∫—ñ—Å—Ç—å: {{ log.quantity }}
          </p>
          <p class="log-removed">–í–∏–¥–∞–ª–µ–Ω–æ: {{ log.removedAt }}</p>
          <p class="log-user">–í–∏–¥–∞–ª–∏–≤: {{ log.removedBy }}</p>
        </div>
      </ng-container>

      <ng-container *ngSwitchDefault> </ng-container>
    </ng-container>
  </div>
</div>
